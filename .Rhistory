library(tidyverse)
library(openintro)
library(ggimage)
library(ggrepel)
knitr::opts_chunk$set(out.width = "100%")
knitr::include_graphics("img/plot-to-recreate.png")
setwd("~/GitHub/ids-s1-21/homework_instructions/hw-01")
devtools::install_github("rstudio-education/dsbox")
devtools::install_github("rstudio-education/dsbox")
edibnb %>%
filter(neighbourhood %in% top_5_medians) %>%
ggplot(aes(x = price, y = neighbourhood, color = neighbourhood, fill = neighbourhood)) +
geom_density_ridges(alpha = 0.5) +
guides(fill = FALSE)
library(tidyverse)
library(dsbox)
library(ggridges)
edibnb %>%
filter(!is.na(neighbourhood)) %>%
ggplot(aes(x = price)) +
geom_histogram(binwidth = 50) +
facet_wrap(~neighbourhood, ncol = 1, scales = "free_y")
edibnb %>%
group_by(neighbourhood) %>%
summarise(med_price = median(price, na.rm = TRUE)) %>%
slice_max(med_price, n = 5)
top_5_medians <- c("New Town", "Old Town", "West End", "Stockbridge",
"Bruntsfield", "Marchmont", "Southside")
edibnb %>%
filter(neighbourhood %in% top_5_medians) %>%
ggplot(aes(x = price, y = neighbourhood, color = neighbourhood, fill = neighbourhood)) +
geom_density_ridges(alpha = 0.5) +
guides(fill = FALSE)
edibnb %>%
filter(neighbourhood %in% top_5_medians) %>%
ggplot(aes(x = price, y = neighbourhood, color = neighbourhood, fill = neighbourhood)) +
geom_density_ridges(alpha = 0.5) +
guides(neighbourhood = FALSE)
edibnb %>%
filter(neighbourhood %in% top_5_medians) %>%
ggplot(aes(x = price, y = neighbourhood, color = neighbourhood, fill = neighbourhood)) +
geom_density_ridges(alpha = 0.5) +
guides(fill = "none")
edibnb %>%
filter(neighbourhood %in% top_5_medians) %>%
ggplot(aes(x = price, y = neighbourhood, color = neighbourhood, fill = neighbourhood)) +
geom_density_ridges(alpha = 0.5) +
guides(fill = "none", color="none")
library(tidyverse)
library(dsbox)
library(ggridges)
edibnb %>%
filter(!is.na(neighbourhood)) %>%
ggplot(aes(x = price)) +
geom_histogram(binwidth = 50) +
facet_wrap(~neighbourhood, ncol = 1, scales = "free_y")
edibnb %>%
group_by(neighbourhood) %>%
summarise(med_price = median(price, na.rm = TRUE)) %>%
slice_max(med_price, n = 5)
top_5_medians <- c("New Town", "Old Town", "West End", "Stockbridge",
"Bruntsfield", "Marchmont", "Southside")
edibnb %>%
filter(neighbourhood %in% top_5_medians) %>%
ggplot(aes(x = price, y = neighbourhood, color = neighbourhood, fill = neighbourhood)) +
geom_density_ridges(alpha = 0.5) +
guides(fill = "none", color="none")
edibnb %>%
filter(neighbourhood %in% top_5_medians) %>%
group_by(neighbourhood) %>%
summarise(
min  = min(price, na.rm = TRUE),
mean = mean(price, na.rm = TRUE),
med  = median(price, na.rm = TRUE),
sd   = sd(price, na.rm = TRUE),
iqr  = IQR(price, na.rm = TRUE),
max  = max(price, na.rm = TRUE)
)
edibnb %>%
filter(!is.na(neighbourhood)) %>%
mutate(neighbourhood = fct_reorder(neighbourhood, review_scores_rating, median, .desc = FALSE)) %>%
ggplot(aes(x = review_scores_rating, y = neighbourhood, fill = neighbourhood)) +
geom_density_ridges(alpha = 0.5) +
scale_fill_viridis_d() +
guides(fill = "none") +
labs(
x = "Review scores rating",
y = "Neighbourhood",
title = "Edinburgh Airbnb listings review scores rating",
subtitle = "Neighbourhoods listed in order of decreasing median price"
)
?edibnb
setwd("~/GitHub/ids-s1-21/instructors_area/keys_and_marking/hw/hw-02")
setwd("~/GitHub/ids-s1-21/homework_instructions/hw-02")
# first part of url
root <- "https://www.opensecrets.org/political-action-committees-pacs/foreign-connected-pacs?cycle="
# second part of url (election years as a sequence)
year <- seq(from = ___, to = ___, by = ___)
# construct urls by pasting first and second parts together
urls <- paste0(___, ___)
library(tidyverse)
library(scales)
pac_all <- read_csv(here::here("hw/hw-03/data/pac-all.csv"))
setwd("~/GitHub/ids-s1-21/instructors_area/keys_and_marking/hw/hw-03")
pac_all <- read_csv(here::here("hw/hw-03/data/pac-all.csv"))
pac_all <- read_csv(here::here("/data/pac-all.csv"))
setwd("~/GitHub/ids-s1-21/instructors_area/keys_and_marking/hw/hw-03")
pac_all <- read_csv(here::here("/data/pac-all.csv"))
here::here
here::here()
pac_all <- read_csv("/data/pac-all.csv")
setwd("~/GitHub/ids-s1-21/instructors_area/keys_and_marking/hw/hw-03")
pac_all <- read_csv("/data/pac-all.csv")
pac_all <- read_csv("./data/pac-all.csv")
glimpse(pac_all)
pac_all <- pac_all %>%
separate(country_parent, into = c("country", "parent"), sep = "/", extra = "merge")
pac_all
parse_currency <- function(x){
x %>%
# remove dollar sign
str_remove("\\$") %>%
# remove all occurences of commas
str_remove_all(",") %>%
# convert to numeric
as.numeric()
}
pac_all <- pac_all %>%
mutate(
total = parse_currency(total),
dems = parse_currency(dems),
repubs = parse_currency(repubs)
)
pac_all
pac_all %>%
filter(country %in% c("Canada", "Mexico")) %>%
group_by(country, year) %>%
summarise(total = sum(total),
.groups = "drop") %>%
ggplot(aes(x = year, y = total, color = country)) +
geom_line(aes(group = country), size = 1) +
scale_y_continuous(labels = dollar_format(scale = 1e-6, suffix = "M")) +
labs(title = "Total Contributions from All Foreign-connected PACs",
subtitle = "in Canada and Mexico",
x = "Year",
y = "Total Contribution in $",
color = "Country") +
theme_minimal()
pac_all %>%
filter(country == "UK", year < 2020) %>%
group_by(year) %>%
summarise(Democrat = sum(dems),
Republican = sum(repubs),
.groups = "drop") %>%
pivot_longer(cols = c(Democrat, Republican),
names_to = "party",
values_to = "amount") %>%
ggplot(aes(x = year)) +
geom_line(aes(y = amount, group = party, color = party),
size = 1) +
scale_color_manual(values = c("blue", "red")) +
scale_y_continuous(labels = dollar_format(scale = 1e-6, suffix = "M")) +
labs(
x = "Year",
y = "Amount",
color = "Party",
title = "Contribution to US politics from UK-Connected PACs",
subtitle = "By party, over time"
) +
theme_minimal()
setwd("~/GitHub/ids-s1-21/homework_instructions/hw-04")
